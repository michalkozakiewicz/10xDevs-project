---
import Layout from "@/layouts/Layout.astro";
import { TopBar } from "@/components/TopBar";
import { SessionsDashboard } from "@/components/sessions/SessionsDashboard";

// Verify user is authenticated (should be guaranteed by middleware)
if (!Astro.locals.user) {
  return Astro.redirect("/auth/login");
}

const userInfo = {
  email: Astro.locals.user.email,
  avatarUrl: undefined,
};
---

<Layout title="Twoje sesje planowania - BucketEstimate AI">
  <TopBar user={userInfo} client:load />
  <SessionsDashboard client:load />
</Layout>
